{"ast":null,"code":"import { ZeroCurvatureEnding } from '../../constants.js';\nimport { Interpolant } from '../Interpolant.js';\nimport { WrapAroundEnding, ZeroSlopeEnding } from '../../constants.js';\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n */\n\nclass CubicInterpolant extends Interpolant {\n  constructor(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n    super(parameterPositions, sampleValues, sampleSize, resultBuffer);\n    this._weightPrev = -0;\n    this._offsetPrev = -0;\n    this._weightNext = -0;\n    this._offsetNext = -0;\n    this.DefaultSettings_ = {\n      endingStart: ZeroCurvatureEnding,\n      endingEnd: ZeroCurvatureEnding\n    };\n  }\n  intervalChanged_(i1, t0, t1) {\n    const pp = this.parameterPositions;\n    let iPrev = i1 - 2,\n      iNext = i1 + 1,\n      tPrev = pp[iPrev],\n      tNext = pp[iNext];\n    if (tPrev === undefined) {\n      switch (this.getSettings_().endingStart) {\n        case ZeroSlopeEnding:\n          // f'(t0) = 0\n          iPrev = i1;\n          tPrev = 2 * t0 - t1;\n          break;\n        case WrapAroundEnding:\n          // use the other end of the curve\n          iPrev = pp.length - 2;\n          tPrev = t0 + pp[iPrev] - pp[iPrev + 1];\n          break;\n        default:\n          // ZeroCurvatureEnding\n\n          // f''(t0) = 0 a.k.a. Natural Spline\n          iPrev = i1;\n          tPrev = t1;\n      }\n    }\n    if (tNext === undefined) {\n      switch (this.getSettings_().endingEnd) {\n        case ZeroSlopeEnding:\n          // f'(tN) = 0\n          iNext = i1;\n          tNext = 2 * t1 - t0;\n          break;\n        case WrapAroundEnding:\n          // use the other end of the curve\n          iNext = 1;\n          tNext = t1 + pp[1] - pp[0];\n          break;\n        default:\n          // ZeroCurvatureEnding\n\n          // f''(tN) = 0, a.k.a. Natural Spline\n          iNext = i1 - 1;\n          tNext = t0;\n      }\n    }\n    const halfDt = (t1 - t0) * 0.5,\n      stride = this.valueSize;\n    this._weightPrev = halfDt / (t0 - tPrev);\n    this._weightNext = halfDt / (tNext - t1);\n    this._offsetPrev = iPrev * stride;\n    this._offsetNext = iNext * stride;\n  }\n  interpolate_(i1, t0, t, t1) {\n    const result = this.resultBuffer,\n      values = this.sampleValues,\n      stride = this.valueSize,\n      o1 = i1 * stride,\n      o0 = o1 - stride,\n      oP = this._offsetPrev,\n      oN = this._offsetNext,\n      wP = this._weightPrev,\n      wN = this._weightNext,\n      p = (t - t0) / (t1 - t0),\n      pp = p * p,\n      ppp = pp * p;\n\n    // evaluate polynomials\n\n    const sP = -wP * ppp + 2 * wP * pp - wP * p;\n    const s0 = (1 + wP) * ppp + (-1.5 - 2 * wP) * pp + (-0.5 + wP) * p + 1;\n    const s1 = (-1 - wN) * ppp + (1.5 + wN) * pp + 0.5 * p;\n    const sN = wN * ppp - wN * pp;\n\n    // combine data linearly\n\n    for (let i = 0; i !== stride; ++i) {\n      result[i] = sP * values[oP + i] + s0 * values[o0 + i] + s1 * values[o1 + i] + sN * values[oN + i];\n    }\n    return result;\n  }\n}\nexport { CubicInterpolant };","map":{"version":3,"names":["ZeroCurvatureEnding","Interpolant","WrapAroundEnding","ZeroSlopeEnding","CubicInterpolant","constructor","parameterPositions","sampleValues","sampleSize","resultBuffer","_weightPrev","_offsetPrev","_weightNext","_offsetNext","DefaultSettings_","endingStart","endingEnd","intervalChanged_","i1","t0","t1","pp","iPrev","iNext","tPrev","tNext","undefined","getSettings_","length","halfDt","stride","valueSize","interpolate_","t","result","values","o1","o0","oP","oN","wP","wN","p","ppp","sP","s0","s1","sN","i"],"sources":["C:/Users/dro1l/source/repos/StaffWork/staffwork.client/node_modules/three/src/math/interpolants/CubicInterpolant.js"],"sourcesContent":["import { ZeroCurvatureEnding } from '../../constants.js';\nimport { Interpolant } from '../Interpolant.js';\nimport { WrapAroundEnding, ZeroSlopeEnding } from '../../constants.js';\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n */\n\nclass CubicInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t\tthis._weightPrev = - 0;\n\t\tthis._offsetPrev = - 0;\n\t\tthis._weightNext = - 0;\n\t\tthis._offsetNext = - 0;\n\n\t\tthis.DefaultSettings_ = {\n\n\t\t\tendingStart: ZeroCurvatureEnding,\n\t\t\tendingEnd: ZeroCurvatureEnding\n\n\t\t};\n\n\t}\n\n\tintervalChanged_( i1, t0, t1 ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet iPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tconst sP = - wP * ppp + 2 * wP * pp - wP * p;\n\t\tconst s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\n\t\tconst s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\n\t\tconst sN = wN * ppp - wN * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nexport { CubicInterpolant };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}