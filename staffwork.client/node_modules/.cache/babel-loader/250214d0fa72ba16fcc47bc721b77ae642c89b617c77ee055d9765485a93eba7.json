{"ast":null,"code":"function WebGLObjects(gl, geometries, attributes, info) {\n  let updateMap = new WeakMap();\n  function update(object) {\n    const frame = info.render.frame;\n    const geometry = object.geometry;\n    const buffergeometry = geometries.get(object, geometry);\n\n    // Update once per frame\n\n    if (updateMap.get(buffergeometry) !== frame) {\n      geometries.update(buffergeometry);\n      updateMap.set(buffergeometry, frame);\n    }\n    if (object.isInstancedMesh) {\n      if (object.hasEventListener('dispose', onInstancedMeshDispose) === false) {\n        object.addEventListener('dispose', onInstancedMeshDispose);\n      }\n      attributes.update(object.instanceMatrix, gl.ARRAY_BUFFER);\n      if (object.instanceColor !== null) {\n        attributes.update(object.instanceColor, gl.ARRAY_BUFFER);\n      }\n    }\n    return buffergeometry;\n  }\n  function dispose() {\n    updateMap = new WeakMap();\n  }\n  function onInstancedMeshDispose(event) {\n    const instancedMesh = event.target;\n    instancedMesh.removeEventListener('dispose', onInstancedMeshDispose);\n    attributes.remove(instancedMesh.instanceMatrix);\n    if (instancedMesh.instanceColor !== null) attributes.remove(instancedMesh.instanceColor);\n  }\n  return {\n    update: update,\n    dispose: dispose\n  };\n}\nexport { WebGLObjects };","map":{"version":3,"names":["WebGLObjects","gl","geometries","attributes","info","updateMap","WeakMap","update","object","frame","render","geometry","buffergeometry","get","set","isInstancedMesh","hasEventListener","onInstancedMeshDispose","addEventListener","instanceMatrix","ARRAY_BUFFER","instanceColor","dispose","event","instancedMesh","target","removeEventListener","remove"],"sources":["C:/Users/dro1l/source/repos/StaffWork/staffwork.client/node_modules/three/src/renderers/webgl/WebGLObjects.js"],"sourcesContent":["function WebGLObjects( gl, geometries, attributes, info ) {\n\n\tlet updateMap = new WeakMap();\n\n\tfunction update( object ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\tconst geometry = object.geometry;\n\t\tconst buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateMap.get( buffergeometry ) !== frame ) {\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateMap.set( buffergeometry, frame );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\tif ( object.hasEventListener( 'dispose', onInstancedMeshDispose ) === false ) {\n\n\t\t\t\tobject.addEventListener( 'dispose', onInstancedMeshDispose );\n\n\t\t\t}\n\n\t\t\tattributes.update( object.instanceMatrix, gl.ARRAY_BUFFER );\n\n\t\t\tif ( object.instanceColor !== null ) {\n\n\t\t\t\tattributes.update( object.instanceColor, gl.ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateMap = new WeakMap();\n\n\t}\n\n\tfunction onInstancedMeshDispose( event ) {\n\n\t\tconst instancedMesh = event.target;\n\n\t\tinstancedMesh.removeEventListener( 'dispose', onInstancedMeshDispose );\n\n\t\tattributes.remove( instancedMesh.instanceMatrix );\n\n\t\tif ( instancedMesh.instanceColor !== null ) attributes.remove( instancedMesh.instanceColor );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\n\nexport { WebGLObjects };\n"],"mappings":"AAAA,SAASA,YAAY,CAAEC,EAAE,EAAEC,UAAU,EAAEC,UAAU,EAAEC,IAAI,EAAG;EAEzD,IAAIC,SAAS,GAAG,IAAIC,OAAO,EAAE;EAE7B,SAASC,MAAM,CAAEC,MAAM,EAAG;IAEzB,MAAMC,KAAK,GAAGL,IAAI,CAACM,MAAM,CAACD,KAAK;IAE/B,MAAME,QAAQ,GAAGH,MAAM,CAACG,QAAQ;IAChC,MAAMC,cAAc,GAAGV,UAAU,CAACW,GAAG,CAAEL,MAAM,EAAEG,QAAQ,CAAE;;IAEzD;;IAEA,IAAKN,SAAS,CAACQ,GAAG,CAAED,cAAc,CAAE,KAAKH,KAAK,EAAG;MAEhDP,UAAU,CAACK,MAAM,CAAEK,cAAc,CAAE;MAEnCP,SAAS,CAACS,GAAG,CAAEF,cAAc,EAAEH,KAAK,CAAE;IAEvC;IAEA,IAAKD,MAAM,CAACO,eAAe,EAAG;MAE7B,IAAKP,MAAM,CAACQ,gBAAgB,CAAE,SAAS,EAAEC,sBAAsB,CAAE,KAAK,KAAK,EAAG;QAE7ET,MAAM,CAACU,gBAAgB,CAAE,SAAS,EAAED,sBAAsB,CAAE;MAE7D;MAEAd,UAAU,CAACI,MAAM,CAAEC,MAAM,CAACW,cAAc,EAAElB,EAAE,CAACmB,YAAY,CAAE;MAE3D,IAAKZ,MAAM,CAACa,aAAa,KAAK,IAAI,EAAG;QAEpClB,UAAU,CAACI,MAAM,CAAEC,MAAM,CAACa,aAAa,EAAEpB,EAAE,CAACmB,YAAY,CAAE;MAE3D;IAED;IAEA,OAAOR,cAAc;EAEtB;EAEA,SAASU,OAAO,GAAG;IAElBjB,SAAS,GAAG,IAAIC,OAAO,EAAE;EAE1B;EAEA,SAASW,sBAAsB,CAAEM,KAAK,EAAG;IAExC,MAAMC,aAAa,GAAGD,KAAK,CAACE,MAAM;IAElCD,aAAa,CAACE,mBAAmB,CAAE,SAAS,EAAET,sBAAsB,CAAE;IAEtEd,UAAU,CAACwB,MAAM,CAAEH,aAAa,CAACL,cAAc,CAAE;IAEjD,IAAKK,aAAa,CAACH,aAAa,KAAK,IAAI,EAAGlB,UAAU,CAACwB,MAAM,CAAEH,aAAa,CAACH,aAAa,CAAE;EAE7F;EAEA,OAAO;IAENd,MAAM,EAAEA,MAAM;IACde,OAAO,EAAEA;EAEV,CAAC;AAEF;AAGA,SAAStB,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}