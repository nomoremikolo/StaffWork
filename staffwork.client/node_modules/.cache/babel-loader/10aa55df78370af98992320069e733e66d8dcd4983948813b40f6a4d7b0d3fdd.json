{"ast":null,"code":"import _slicedToArray from\"C:/Users/dro1l/source/repos/StaffWork/staffwork.client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import\"./WareMockup.module.css\";import{Heart,HeartFill}from\"react-bootstrap-icons\";import{Link,useNavigate}from\"react-router-dom\";import{useAppDispatch}from\"../hooks/redux\";import{add_to_favorite,remove_from_favorite}from\"../redux/action_creators/ware_action_creator\";import{ImagesEndpoint}from\"../global_variables\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var WareMockup=function WareMockup(_ref){var item=_ref.item;var dispatch=useAppDispatch();var _useState=useState(item.isFavorite!=null&&true?item.isFavorite:false),_useState2=_slicedToArray(_useState,2),liked=_useState2[0],setLiked=_useState2[1];console.log(item.isFavorite);var navigate=useNavigate();var handleClick=function handleClick(){setLiked(!liked);dispatch(liked?remove_from_favorite(item.id):add_to_favorite(item.id));};useEffect(function(){var _item$isFavorite;setLiked((_item$isFavorite=item.isFavorite)!==null&&_item$isFavorite!==void 0?_item$isFavorite:liked);},[item.isFavorite]);return/*#__PURE__*/_jsxs(\"div\",{className:\"grow card hover shadow mt-4 me-lg-4 col-12 col-md-4 mx-auto mx-lg-3 d-inline-block\",style:{\"width\":\"18rem\"},children:[/*#__PURE__*/_jsxs(Link,{className:'text-decoration-none',to:\"/Wares/\".concat(item.id),children:[/*#__PURE__*/_jsx(\"img\",{style:{'objectFit':'cover',width:\"100%\",height:350},src:\"\".concat(ImagesEndpoint,\"/Get/\").concat(item.thumbnail),className:\"card-img-top blur-elem pt-3\",alt:\"...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:/*#__PURE__*/_jsx(\"p\",{className:'d-inline',children:item.name})}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text text-muted\",children:item.sizes}),item.countInStorage>0?/*#__PURE__*/_jsx(_Fragment,{children:item.isDiscount?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-danger d-inline\",children:[item.price,\" \\u0433\\u0440\\u043D.\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted d-inline\",children:/*#__PURE__*/_jsxs(\"del\",{children:[item.oldPrice,\" \\u0433\\u0440\\u043D.\"]})})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-danger d-inline\",children:[item.price,\" \\u0433\\u0440\\u043D.\"]})})}):/*#__PURE__*/_jsx(\"p\",{className:'text-decoration-underline',children:\"Ended\"})]})]}),item.isDiscount?/*#__PURE__*/_jsxs(\"p\",{className:\"position-absolute top-0 start-0 bg-danger px-2 py-1 m-2 text-white\",children:[\"-\",100-Math.floor(100*item.price/item.oldPrice),\"%\"]}):/*#__PURE__*/_jsx(_Fragment,{}),item.countInStorage<10?/*#__PURE__*/_jsx(\"p\",{className:\"position-absolute top-0 end-0 bg-danger px-2 py-1 m-2 text-white\",children:item.countInStorage<1?/*#__PURE__*/_jsx(_Fragment,{children:\"Ended\"}):/*#__PURE__*/_jsx(_Fragment,{children:\"Ends\"})}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn position-absolute bottom-0 end-0\",onClick:handleClick,children:liked?/*#__PURE__*/_jsx(HeartFill,{height:20,width:20}):/*#__PURE__*/_jsx(Heart,{height:20,width:20})})]});};export default WareMockup;","map":{"version":3,"names":["React","useEffect","useState","Heart","HeartFill","Link","useNavigate","useAppDispatch","add_to_favorite","remove_from_favorite","ImagesEndpoint","WareMockup","item","dispatch","isFavorite","liked","setLiked","console","log","navigate","handleClick","id","width","height","thumbnail","name","sizes","countInStorage","isDiscount","price","oldPrice","Math","floor"],"sources":["C:/Users/dro1l/source/repos/StaffWork/staffwork.client/src/components/WareMockup.tsx"],"sourcesContent":["import React, {FC, useEffect, useRef, useState} from 'react';\r\nimport {IWare} from \"../types/ware\";\r\nimport \"./WareMockup.module.css\"\r\nimport {Heart, HeartFill} from \"react-bootstrap-icons\";\r\nimport {Link, useNavigate} from \"react-router-dom\";\r\nimport {useAppDispatch} from \"../hooks/redux\";\r\nimport {wareReducer} from \"../redux/reducers/wareReducer\";\r\nimport {add_to_favorite, remove_from_favorite} from \"../redux/action_creators/ware_action_creator\";\r\nimport {ImagesEndpoint} from \"../global_variables\";\r\n\r\ninterface IWareMockupProps{\r\n    item: IWare\r\n}\r\nconst WareMockup:FC<IWareMockupProps> = ({item}) => {\r\n    const dispatch = useAppDispatch()\r\n    const [liked, setLiked] = useState<boolean>(item.isFavorite != null && true ? item.isFavorite : false)\r\n    console.log(item.isFavorite)\r\n    const navigate = useNavigate()\r\n\r\n    const handleClick = () => {\r\n        setLiked(!liked)\r\n        dispatch(liked ? remove_from_favorite(item.id) : add_to_favorite(item.id))\r\n    }\r\n    useEffect(() => {\r\n        setLiked(item.isFavorite ?? liked)\r\n    }, [item.isFavorite])\r\n    return (\r\n        <div className=\"grow card hover shadow mt-4 me-lg-4 col-12 col-md-4 mx-auto mx-lg-3 d-inline-block\" style={{\"width\": \"18rem\"}}>\r\n            <Link className={'text-decoration-none'} to={`/Wares/${item.id}`}>\r\n                <img\r\n                    style={{'objectFit': 'cover', width: \"100%\", height: 350}}\r\n                    src={`${ImagesEndpoint}/Get/${item.thumbnail}`}\r\n                    className=\"card-img-top blur-elem pt-3\" alt=\"...\"/>\r\n                <div className=\"card-body\">\r\n                    <h5 className=\"card-title\"><p className={'d-inline'}>{item.name}</p></h5>\r\n                    <p className=\"card-text text-muted\">{item.sizes}</p>\r\n                    {item.countInStorage > 0 ? <>\r\n                        {item.isDiscount ?\r\n                            <>\r\n                                <p className=\"text-danger d-inline\">{item.price} грн.</p>\r\n                                <p className=\"text-muted d-inline\">\r\n                                    <del>{item.oldPrice} грн.</del>\r\n                                </p>\r\n                            </>\r\n                        :\r\n                            <>\r\n                                <p className=\"text-danger d-inline\">{item.price} грн.</p>\r\n                            </>\r\n                        }\r\n\r\n                    </> : <p className={'text-decoration-underline'}>Ended</p>}\r\n                </div>\r\n            </Link>\r\n            {item.isDiscount ? (<p className=\"position-absolute top-0 start-0 bg-danger px-2 py-1 m-2 text-white\">-{100 - Math.floor(100 * item.price / item.oldPrice)}%</p>) : <></>}\r\n            {item.countInStorage < 10 ? (<p className=\"position-absolute top-0 end-0 bg-danger px-2 py-1 m-2 text-white\">{item.countInStorage < 1 ? <>Ended</> : <>Ends</>}</p>) : <></>}\r\n            <button className=\"btn position-absolute bottom-0 end-0\" onClick={handleClick}>{liked ? <HeartFill height={20} width={20}/> : <Heart height={20} width={20}/>}</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default WareMockup;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}