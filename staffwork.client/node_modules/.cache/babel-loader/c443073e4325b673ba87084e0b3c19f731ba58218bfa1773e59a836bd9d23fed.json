{"ast":null,"code":"import{useEffect}from\"react\";import{Toast,ToastContainer}from\"react-bootstrap\";import{useAppDispatch,useAppSelector}from\"../../hooks/redux\";import{NotificationReducer}from\"../../redux/reducers/NotificationReducer\";import ReactDOM from\"react-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var NotificationToastMessage=function NotificationToastMessage(){var DEACTIVATE_MESSAGE=NotificationReducer.actions.DEACTIVATE_MESSAGE;var dispatch=useAppDispatch();var messages=useAppSelector(function(state){return state.NotificationReducer.messages;});var activeMessages=messages?messages.filter(function(message){return message.isActive;}):null;var deactivateMessage=function deactivateMessage(id){dispatch(DEACTIVATE_MESSAGE(id));};var pushMessage=function pushMessage(id){setTimeout(function(){deactivateMessage(id);},3000);};useEffect(function(){if(activeMessages){if(activeMessages.length>0){var lastMessage=activeMessages.length-1;var id=activeMessages[lastMessage].id;pushMessage(id);if(activeMessages.length>5){deactivateMessage(activeMessages[0].id);}}}},[activeMessages]);return/*#__PURE__*/ReactDOM.createPortal(/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(ToastContainer,{className:\"position-fixed end-0 bottom-0 mb-4 me-4 p-1\",children:activeMessages!=null?activeMessages.reverse().map(function(message){return/*#__PURE__*/_jsx(Toast,{className:message.isSuccess?\"bg-success\":message.isError?\"bg-danger\":\"bg-warning\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(Toast.Body,{className:\"text-white\",children:message.message}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deactivateMessage(message.id);},className:\"btn btn-close position-absolute end-0 top-0 mt-1 me-2\"})]})},message.id);}):/*#__PURE__*/_jsx(_Fragment,{})})}),document.getElementById('portal'));};export default NotificationToastMessage;","map":{"version":3,"names":["useEffect","Toast","ToastContainer","useAppDispatch","useAppSelector","NotificationReducer","ReactDOM","NotificationToastMessage","DEACTIVATE_MESSAGE","actions","dispatch","messages","state","activeMessages","filter","message","isActive","deactivateMessage","id","pushMessage","setTimeout","length","lastMessage","createPortal","reverse","map","isSuccess","isError","document","getElementById"],"sources":["C:/Users/dro1l/source/repos/StaffWork/staffwork.client/src/pages/Layout/NotificationToastMessage.tsx"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { Toast, ToastContainer } from \"react-bootstrap\";\r\nimport { useAppDispatch, useAppSelector } from \"../../hooks/redux\";\r\nimport {MessageType, NotificationReducer} from \"../../redux/reducers/NotificationReducer\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nconst NotificationToastMessage = () => {\r\n    const { DEACTIVATE_MESSAGE } = NotificationReducer.actions;\r\n    const dispatch = useAppDispatch();\r\n    const messages: MessageType[] | null = useAppSelector((state) => state.NotificationReducer.messages);\r\n    const activeMessages = messages ? messages.filter((message) => message.isActive) : null;\r\n\r\n    const deactivateMessage = (id: number) => {\r\n        dispatch(DEACTIVATE_MESSAGE(id));\r\n    };\r\n\r\n    const pushMessage = (id: number) => {\r\n        setTimeout(() => {\r\n            deactivateMessage(id);\r\n        }, 3000);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (activeMessages) {\r\n            if (activeMessages.length > 0) {\r\n                const lastMessage = activeMessages!.length - 1;\r\n                const id = activeMessages![lastMessage].id;\r\n                pushMessage(id);\r\n                if(activeMessages.length > 5){\r\n                    deactivateMessage(activeMessages[0].id);\r\n                }\r\n            }\r\n        }\r\n    }, [activeMessages]);\r\n\r\n    return ReactDOM.createPortal(\r\n        <>\r\n            <ToastContainer className=\"position-fixed end-0 bottom-0 mb-4 me-4 p-1\">\r\n                {activeMessages != null ? (\r\n                    activeMessages.reverse().map((message: MessageType) => {\r\n                        return (\r\n                            <Toast\r\n                                className={message.isSuccess ? \"bg-success\" : message.isError ? \"bg-danger\" : \"bg-warning\"}\r\n                                key={message.id}\r\n                            >\r\n                                <div className=\"position-relative\">\r\n                                    <Toast.Body className={\"text-white\"}>{message.message}</Toast.Body>\r\n                                    <button\r\n                                        onClick={() => deactivateMessage(message.id)}\r\n                                        className={\"btn btn-close position-absolute end-0 top-0 mt-1 me-2\"}\r\n                                    ></button>\r\n                                </div>\r\n                            </Toast>\r\n                        );\r\n                    })\r\n                ) : (\r\n                    <></>\r\n                )}\r\n            </ToastContainer>\r\n        </>,\r\n        document.getElementById('portal') as HTMLElement\r\n    );\r\n};\r\n\r\nexport default NotificationToastMessage;"],"mappings":"AAAA,OAASA,SAAS,KAAQ,OAAO,CACjC,OAASC,KAAK,CAAEC,cAAc,KAAQ,iBAAiB,CACvD,OAASC,cAAc,CAAEC,cAAc,KAAQ,mBAAmB,CAClE,OAAqBC,mBAAmB,KAAO,0CAA0C,CACzF,MAAOC,SAAQ,KAAM,WAAW,CAAC,6IAEjC,GAAMC,yBAAwB,CAAG,QAA3BA,yBAAwB,EAAS,CACnC,GAAQC,mBAAkB,CAAKH,mBAAmB,CAACI,OAAO,CAAlDD,kBAAkB,CAC1B,GAAME,SAAQ,CAAGP,cAAc,EAAE,CACjC,GAAMQ,SAA8B,CAAGP,cAAc,CAAC,SAACQ,KAAK,QAAKA,MAAK,CAACP,mBAAmB,CAACM,QAAQ,GAAC,CACpG,GAAME,eAAc,CAAGF,QAAQ,CAAGA,QAAQ,CAACG,MAAM,CAAC,SAACC,OAAO,QAAKA,QAAO,CAACC,QAAQ,GAAC,CAAG,IAAI,CAEvF,GAAMC,kBAAiB,CAAG,QAApBA,kBAAiB,CAAIC,EAAU,CAAK,CACtCR,QAAQ,CAACF,kBAAkB,CAACU,EAAE,CAAC,CAAC,CACpC,CAAC,CAED,GAAMC,YAAW,CAAG,QAAdA,YAAW,CAAID,EAAU,CAAK,CAChCE,UAAU,CAAC,UAAM,CACbH,iBAAiB,CAACC,EAAE,CAAC,CACzB,CAAC,CAAE,IAAI,CAAC,CACZ,CAAC,CAEDlB,SAAS,CAAC,UAAM,CACZ,GAAIa,cAAc,CAAE,CAChB,GAAIA,cAAc,CAACQ,MAAM,CAAG,CAAC,CAAE,CAC3B,GAAMC,YAAW,CAAGT,cAAc,CAAEQ,MAAM,CAAG,CAAC,CAC9C,GAAMH,GAAE,CAAGL,cAAc,CAAES,WAAW,CAAC,CAACJ,EAAE,CAC1CC,WAAW,CAACD,EAAE,CAAC,CACf,GAAGL,cAAc,CAACQ,MAAM,CAAG,CAAC,CAAC,CACzBJ,iBAAiB,CAACJ,cAAc,CAAC,CAAC,CAAC,CAACK,EAAE,CAAC,CAC3C,CACJ,CACJ,CACJ,CAAC,CAAE,CAACL,cAAc,CAAC,CAAC,CAEpB,mBAAOP,QAAQ,CAACiB,YAAY,cACxB,sCACI,KAAC,cAAc,EAAC,SAAS,CAAC,6CAA6C,UAClEV,cAAc,EAAI,IAAI,CACnBA,cAAc,CAACW,OAAO,EAAE,CAACC,GAAG,CAAC,SAACV,OAAoB,CAAK,CACnD,mBACI,KAAC,KAAK,EACF,SAAS,CAAEA,OAAO,CAACW,SAAS,CAAG,YAAY,CAAGX,OAAO,CAACY,OAAO,CAAG,WAAW,CAAG,YAAa,uBAG3F,aAAK,SAAS,CAAC,mBAAmB,wBAC9B,KAAC,KAAK,CAAC,IAAI,EAAC,SAAS,CAAE,YAAa,UAAEZ,OAAO,CAACA,OAAO,EAAc,cACnE,eACI,OAAO,CAAE,yBAAME,kBAAiB,CAACF,OAAO,CAACG,EAAE,CAAC,EAAC,CAC7C,SAAS,CAAE,uDAAwD,EAC7D,GACR,EARDH,OAAO,CAACG,EAAE,CASX,CAEhB,CAAC,CAAC,cAEF,kBACH,EACY,EAClB,CACHU,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC,CACpC,CACL,CAAC,CAED,cAAetB,yBAAwB"},"metadata":{},"sourceType":"module","externalDependencies":[]}