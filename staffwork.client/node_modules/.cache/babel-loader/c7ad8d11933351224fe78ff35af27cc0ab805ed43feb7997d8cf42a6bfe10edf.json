{"ast":null,"code":"import axios from \"axios\";\nimport { GraphQlEndpoint } from \"../../global_variables\";\nimport { usersReducer } from \"../reducers/usersReducer\";\nexport const fetch_all_users = () => async dispatch => {\n  const graphqlQuery = {\n    \"query\": `\n            query getAll {\n              user {\n                getAll {\n                  errors\n                  statusCode\n                  users {\n                    id\n                    username\n                    name\n                    surname\n                    age\n                    email\n                    adress\n                    role\n                    isActivated\n                    permissions\n                  }\n                }\n              }\n            }\n        `\n  };\n  dispatch(usersReducer.actions.GET_ALL_USERS());\n  try {\n    const response = await axios({\n      url: GraphQlEndpoint,\n      method: 'post',\n      withCredentials: true,\n      headers: {\n        \"content-type\": \"application/json\",\n        \"Authorization\": `Bearer ${localStorage.getItem('accessToken')}`\n      },\n      data: graphqlQuery\n    });\n    let r = response.data.data.user.getAll;\n    if (r.statusCode === 200) {\n      dispatch(usersReducer.actions.GET_ALL_USERS_SUCCESS(r.users));\n    } else {\n      dispatch(usersReducer.actions.GET_ALL_USERS_ERROR(r.errors));\n    }\n  } catch (e) {\n    dispatch(usersReducer.actions.GET_ALL_USERS_ERROR(e));\n    localStorage.removeItem('accessToken');\n  }\n};","map":{"version":3,"names":["axios","GraphQlEndpoint","usersReducer","fetch_all_users","dispatch","graphqlQuery","actions","GET_ALL_USERS","response","url","method","withCredentials","headers","localStorage","getItem","data","r","user","getAll","statusCode","GET_ALL_USERS_SUCCESS","users","GET_ALL_USERS_ERROR","errors","e","removeItem"],"sources":["C:/Users/dro1l/source/repos/StaffWork/staffwork.client/src/redux/action_creators/users_action_creator.ts"],"sourcesContent":["import {AppDispatch} from \"../store\";\r\nimport {authorizationReducer} from \"../reducers/authorizationReducer\";\r\nimport axios from \"axios\";\r\nimport {GraphQlEndpoint} from \"../../global_variables\";\r\nimport {usersReducer} from \"../reducers/usersReducer\";\r\n\r\nexport const fetch_all_users = () => async (dispatch: AppDispatch) => {\r\n    const graphqlQuery = {\r\n        \"query\": `\r\n            query getAll {\r\n              user {\r\n                getAll {\r\n                  errors\r\n                  statusCode\r\n                  users {\r\n                    id\r\n                    username\r\n                    name\r\n                    surname\r\n                    age\r\n                    email\r\n                    adress\r\n                    role\r\n                    isActivated\r\n                    permissions\r\n                  }\r\n                }\r\n              }\r\n            }\r\n        `,\r\n    };\r\n    dispatch(usersReducer.actions.GET_ALL_USERS())\r\n    try {\r\n        const response = await axios({\r\n            url: GraphQlEndpoint,\r\n            method: 'post',\r\n            withCredentials: true,\r\n            headers: {\r\n                \"content-type\": \"application/json\",\r\n                \"Authorization\": `Bearer ${localStorage.getItem('accessToken')}`,\r\n            },\r\n            data: graphqlQuery\r\n        })\r\n        let r = response.data.data.user.getAll\r\n        if (r.statusCode === 200){\r\n            dispatch(usersReducer.actions.GET_ALL_USERS_SUCCESS(r.users))\r\n        }else{\r\n            dispatch(usersReducer.actions.GET_ALL_USERS_ERROR(r.errors))\r\n        }\r\n    } catch (e) {\r\n        dispatch(usersReducer.actions.GET_ALL_USERS_ERROR(e))\r\n        localStorage.removeItem('accessToken')\r\n    }\r\n}"],"mappings":"AAEA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,eAAe,QAAO,wBAAwB;AACtD,SAAQC,YAAY,QAAO,0BAA0B;AAErD,OAAO,MAAMC,eAAe,GAAG,MAAM,MAAOC,QAAqB,IAAK;EAClE,MAAMC,YAAY,GAAG;IACjB,OAAO,EAAG;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,CAAC;EACDD,QAAQ,CAACF,YAAY,CAACI,OAAO,CAACC,aAAa,EAAE,CAAC;EAC9C,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMR,KAAK,CAAC;MACzBS,GAAG,EAAER,eAAe;MACpBS,MAAM,EAAE,MAAM;MACdC,eAAe,EAAE,IAAI;MACrBC,OAAO,EAAE;QACL,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAG,UAASC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAE;MACnE,CAAC;MACDC,IAAI,EAAEV;IACV,CAAC,CAAC;IACF,IAAIW,CAAC,GAAGR,QAAQ,CAACO,IAAI,CAACA,IAAI,CAACE,IAAI,CAACC,MAAM;IACtC,IAAIF,CAAC,CAACG,UAAU,KAAK,GAAG,EAAC;MACrBf,QAAQ,CAACF,YAAY,CAACI,OAAO,CAACc,qBAAqB,CAACJ,CAAC,CAACK,KAAK,CAAC,CAAC;IACjE,CAAC,MAAI;MACDjB,QAAQ,CAACF,YAAY,CAACI,OAAO,CAACgB,mBAAmB,CAACN,CAAC,CAACO,MAAM,CAAC,CAAC;IAChE;EACJ,CAAC,CAAC,OAAOC,CAAC,EAAE;IACRpB,QAAQ,CAACF,YAAY,CAACI,OAAO,CAACgB,mBAAmB,CAACE,CAAC,CAAC,CAAC;IACrDX,YAAY,CAACY,UAAU,CAAC,aAAa,CAAC;EAC1C;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}