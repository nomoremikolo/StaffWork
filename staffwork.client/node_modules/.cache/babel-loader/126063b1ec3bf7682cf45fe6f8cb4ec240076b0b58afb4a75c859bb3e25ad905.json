{"ast":null,"code":"import { ImageUtils } from '../extras/ImageUtils.js';\nimport * as MathUtils from '../math/MathUtils.js';\nclass Source {\n  constructor() {\n    let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.isSource = true;\n    this.uuid = MathUtils.generateUUID();\n    this.data = data;\n    this.version = 0;\n  }\n  set needsUpdate(value) {\n    if (value === true) this.version++;\n  }\n  toJSON(meta) {\n    const isRootObject = meta === undefined || typeof meta === 'string';\n    if (!isRootObject && meta.images[this.uuid] !== undefined) {\n      return meta.images[this.uuid];\n    }\n    const output = {\n      uuid: this.uuid,\n      url: ''\n    };\n    const data = this.data;\n    if (data !== null) {\n      let url;\n      if (Array.isArray(data)) {\n        // cube texture\n\n        url = [];\n        for (let i = 0, l = data.length; i < l; i++) {\n          if (data[i].isDataTexture) {\n            url.push(serializeImage(data[i].image));\n          } else {\n            url.push(serializeImage(data[i]));\n          }\n        }\n      } else {\n        // texture\n\n        url = serializeImage(data);\n      }\n      output.url = url;\n    }\n    if (!isRootObject) {\n      meta.images[this.uuid] = output;\n    }\n    return output;\n  }\n}\nfunction serializeImage(image) {\n  if (typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement || typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement || typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    // default images\n\n    return ImageUtils.getDataURL(image);\n  } else {\n    if (image.data) {\n      // images of DataTexture\n\n      return {\n        data: Array.from(image.data),\n        width: image.width,\n        height: image.height,\n        type: image.data.constructor.name\n      };\n    } else {\n      console.warn('THREE.Texture: Unable to serialize Texture.');\n      return {};\n    }\n  }\n}\nexport { Source };","map":{"version":3,"names":["ImageUtils","MathUtils","Source","constructor","data","isSource","uuid","generateUUID","version","needsUpdate","value","toJSON","meta","isRootObject","undefined","images","output","url","Array","isArray","i","l","length","isDataTexture","push","serializeImage","image","HTMLImageElement","HTMLCanvasElement","ImageBitmap","getDataURL","from","width","height","type","name","console","warn"],"sources":["C:/Users/dro1l/source/repos/StaffWork/staffwork.client/node_modules/three/src/textures/Source.js"],"sourcesContent":["import { ImageUtils } from '../extras/ImageUtils.js';\nimport * as MathUtils from '../math/MathUtils.js';\n\nclass Source {\n\n\tconstructor( data = null ) {\n\n\t\tthis.isSource = true;\n\n\t\tthis.uuid = MathUtils.generateUUID();\n\n\t\tthis.data = data;\n\n\t\tthis.version = 0;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.images[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.images[ this.uuid ];\n\n\t\t}\n\n\t\tconst output = {\n\t\t\tuuid: this.uuid,\n\t\t\turl: ''\n\t\t};\n\n\t\tconst data = this.data;\n\n\t\tif ( data !== null ) {\n\n\t\t\tlet url;\n\n\t\t\tif ( Array.isArray( data ) ) {\n\n\t\t\t\t// cube texture\n\n\t\t\t\turl = [];\n\n\t\t\t\tfor ( let i = 0, l = data.length; i < l; i ++ ) {\n\n\t\t\t\t\tif ( data[ i ].isDataTexture ) {\n\n\t\t\t\t\t\turl.push( serializeImage( data[ i ].image ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\turl.push( serializeImage( data[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// texture\n\n\t\t\t\turl = serializeImage( data );\n\n\t\t\t}\n\n\t\t\toutput.url = url;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.images[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t}\n\n}\n\nfunction serializeImage( image ) {\n\n\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t// default images\n\n\t\treturn ImageUtils.getDataURL( image );\n\n\t} else {\n\n\t\tif ( image.data ) {\n\n\t\t\t// images of DataTexture\n\n\t\t\treturn {\n\t\t\t\tdata: Array.from( image.data ),\n\t\t\t\twidth: image.width,\n\t\t\t\theight: image.height,\n\t\t\t\ttype: image.data.constructor.name\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Texture: Unable to serialize Texture.' );\n\t\t\treturn {};\n\n\t\t}\n\n\t}\n\n}\n\nexport { Source };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}