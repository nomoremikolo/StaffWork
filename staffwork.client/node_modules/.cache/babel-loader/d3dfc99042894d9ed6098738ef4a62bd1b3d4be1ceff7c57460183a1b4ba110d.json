{"ast":null,"code":"import * as MathUtils from '../math/MathUtils.js';\nimport { StaticDrawUsage } from '../constants.js';\nclass InterleavedBuffer {\n  constructor(array, stride) {\n    this.isInterleavedBuffer = true;\n    this.array = array;\n    this.stride = stride;\n    this.count = array !== undefined ? array.length / stride : 0;\n    this.usage = StaticDrawUsage;\n    this.updateRange = {\n      offset: 0,\n      count: -1\n    };\n    this.version = 0;\n    this.uuid = MathUtils.generateUUID();\n  }\n  onUploadCallback() {}\n  set needsUpdate(value) {\n    if (value === true) this.version++;\n  }\n  setUsage(value) {\n    this.usage = value;\n    return this;\n  }\n  copy(source) {\n    this.array = new source.array.constructor(source.array);\n    this.count = source.count;\n    this.stride = source.stride;\n    this.usage = source.usage;\n    return this;\n  }\n  copyAt(index1, attribute, index2) {\n    index1 *= this.stride;\n    index2 *= attribute.stride;\n    for (let i = 0, l = this.stride; i < l; i++) {\n      this.array[index1 + i] = attribute.array[index2 + i];\n    }\n    return this;\n  }\n  set(value) {\n    let offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this.array.set(value, offset);\n    return this;\n  }\n  clone(data) {\n    if (data.arrayBuffers === undefined) {\n      data.arrayBuffers = {};\n    }\n    if (this.array.buffer._uuid === undefined) {\n      this.array.buffer._uuid = MathUtils.generateUUID();\n    }\n    if (data.arrayBuffers[this.array.buffer._uuid] === undefined) {\n      data.arrayBuffers[this.array.buffer._uuid] = this.array.slice(0).buffer;\n    }\n    const array = new this.array.constructor(data.arrayBuffers[this.array.buffer._uuid]);\n    const ib = new this.constructor(array, this.stride);\n    ib.setUsage(this.usage);\n    return ib;\n  }\n  onUpload(callback) {\n    this.onUploadCallback = callback;\n    return this;\n  }\n  toJSON(data) {\n    if (data.arrayBuffers === undefined) {\n      data.arrayBuffers = {};\n    }\n\n    // generate UUID for array buffer if necessary\n\n    if (this.array.buffer._uuid === undefined) {\n      this.array.buffer._uuid = MathUtils.generateUUID();\n    }\n    if (data.arrayBuffers[this.array.buffer._uuid] === undefined) {\n      data.arrayBuffers[this.array.buffer._uuid] = Array.from(new Uint32Array(this.array.buffer));\n    }\n\n    //\n\n    return {\n      uuid: this.uuid,\n      buffer: this.array.buffer._uuid,\n      type: this.array.constructor.name,\n      stride: this.stride\n    };\n  }\n}\nexport { InterleavedBuffer };","map":{"version":3,"names":["MathUtils","StaticDrawUsage","InterleavedBuffer","constructor","array","stride","isInterleavedBuffer","count","undefined","length","usage","updateRange","offset","version","uuid","generateUUID","onUploadCallback","needsUpdate","value","setUsage","copy","source","copyAt","index1","attribute","index2","i","l","set","clone","data","arrayBuffers","buffer","_uuid","slice","ib","onUpload","callback","toJSON","Array","from","Uint32Array","type","name"],"sources":["C:/Users/dro1l/source/repos/StaffWork/staffwork.client/node_modules/three/src/core/InterleavedBuffer.js"],"sourcesContent":["import * as MathUtils from '../math/MathUtils.js';\nimport { StaticDrawUsage } from '../constants.js';\n\nclass InterleavedBuffer {\n\n\tconstructor( array, stride ) {\n\n\t\tthis.isInterleavedBuffer = true;\n\n\t\tthis.array = array;\n\t\tthis.stride = stride;\n\t\tthis.count = array !== undefined ? array.length / stride : 0;\n\n\t\tthis.usage = StaticDrawUsage;\n\t\tthis.updateRange = { offset: 0, count: - 1 };\n\n\t\tthis.version = 0;\n\n\t\tthis.uuid = MathUtils.generateUUID();\n\n\t}\n\n\tonUploadCallback() {}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\tsetUsage( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.count = source.count;\n\t\tthis.stride = source.stride;\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t}\n\n\tcopyAt( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.stride;\n\t\tindex2 *= attribute.stride;\n\n\t\tfor ( let i = 0, l = this.stride; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tset( value, offset = 0 ) {\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t}\n\n\tclone( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = this.array.slice( 0 ).buffer;\n\n\t\t}\n\n\t\tconst array = new this.array.constructor( data.arrayBuffers[ this.array.buffer._uuid ] );\n\n\t\tconst ib = new this.constructor( array, this.stride );\n\t\tib.setUsage( this.usage );\n\n\t\treturn ib;\n\n\t}\n\n\tonUpload( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\t// generate UUID for array buffer if necessary\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = Array.from( new Uint32Array( this.array.buffer ) );\n\n\t\t}\n\n\t\t//\n\n\t\treturn {\n\t\t\tuuid: this.uuid,\n\t\t\tbuffer: this.array.buffer._uuid,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tstride: this.stride\n\t\t};\n\n\t}\n\n}\n\nexport { InterleavedBuffer };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}