{"ast":null,"code":"import { ShaderNode, div, max, sub, mul, clamp, pow, pow2, pow4, cond, greaterThan } from '../../shadernode/ShaderNodeBaseElements.js';\nconst getDistanceAttenuation = new ShaderNode(inputs => {\n  const {\n    lightDistance,\n    cutoffDistance,\n    decayExponent\n  } = inputs;\n\n  // based upon Frostbite 3 Moving to Physically-based Rendering\n  // page 32, equation 26: E[window1]\n  // https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n  const distanceFalloff = div(1.0, max(pow(lightDistance, decayExponent), 0.01));\n  return cond(greaterThan(cutoffDistance, 0), mul(distanceFalloff, pow2(clamp(sub(1.0, pow4(div(lightDistance, cutoffDistance)))))), distanceFalloff);\n}); // validated\n\nexport default getDistanceAttenuation;","map":{"version":3,"names":["ShaderNode","div","max","sub","mul","clamp","pow","pow2","pow4","cond","greaterThan","getDistanceAttenuation","inputs","lightDistance","cutoffDistance","decayExponent","distanceFalloff"],"sources":["C:/Users/dro1l/source/repos/StaffWork/staffwork.client/node_modules/three/examples/jsm/nodes/functions/light/getDistanceAttenuation.js"],"sourcesContent":["import {\n\tShaderNode, div, max, sub, mul, clamp, pow, pow2, pow4, cond, greaterThan\n} from '../../shadernode/ShaderNodeBaseElements.js';\n\nconst getDistanceAttenuation = new ShaderNode( ( inputs ) => {\n\n\tconst { lightDistance, cutoffDistance, decayExponent } = inputs;\n\n\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t// page 32, equation 26: E[window1]\n\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\tconst distanceFalloff = div( 1.0, max( pow( lightDistance, decayExponent ), 0.01 ) );\n\n\treturn cond(\n\t\tgreaterThan( cutoffDistance, 0 ),\n\t\tmul( distanceFalloff, pow2( clamp( sub( 1.0, pow4( div( lightDistance, cutoffDistance ) ) ) ) ) ),\n\t\tdistanceFalloff\n\t);\n\n} ); // validated\n\nexport default getDistanceAttenuation;\n"],"mappings":"AAAA,SACCA,UAAU,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,KAAK,EAAEC,GAAG,EAAEC,IAAI,EAAEC,IAAI,EAAEC,IAAI,EAAEC,WAAW,QACnE,4CAA4C;AAEnD,MAAMC,sBAAsB,GAAG,IAAIX,UAAU,CAAIY,MAAM,IAAM;EAE5D,MAAM;IAAEC,aAAa;IAAEC,cAAc;IAAEC;EAAc,CAAC,GAAGH,MAAM;;EAE/D;EACA;EACA;EACA,MAAMI,eAAe,GAAGf,GAAG,CAAE,GAAG,EAAEC,GAAG,CAAEI,GAAG,CAAEO,aAAa,EAAEE,aAAa,CAAE,EAAE,IAAI,CAAE,CAAE;EAEpF,OAAON,IAAI,CACVC,WAAW,CAAEI,cAAc,EAAE,CAAC,CAAE,EAChCV,GAAG,CAAEY,eAAe,EAAET,IAAI,CAAEF,KAAK,CAAEF,GAAG,CAAE,GAAG,EAAEK,IAAI,CAAEP,GAAG,CAAEY,aAAa,EAAEC,cAAc,CAAE,CAAE,CAAE,CAAE,CAAE,CAAE,EACjGE,eAAe,CACf;AAEF,CAAC,CAAE,CAAC,CAAC;;AAEL,eAAeL,sBAAsB"},"metadata":{},"sourceType":"module","externalDependencies":[]}