{"ast":null,"code":"import { Cache } from './Cache.js';\nimport { Loader } from './Loader.js';\nclass ImageBitmapLoader extends Loader {\n  constructor(manager) {\n    super(manager);\n    this.isImageBitmapLoader = true;\n    if (typeof createImageBitmap === 'undefined') {\n      console.warn('THREE.ImageBitmapLoader: createImageBitmap() not supported.');\n    }\n    if (typeof fetch === 'undefined') {\n      console.warn('THREE.ImageBitmapLoader: fetch() not supported.');\n    }\n    this.options = {\n      premultiplyAlpha: 'none'\n    };\n  }\n  setOptions(options) {\n    this.options = options;\n    return this;\n  }\n  load(url, onLoad, onProgress, onError) {\n    if (url === undefined) url = '';\n    if (this.path !== undefined) url = this.path + url;\n    url = this.manager.resolveURL(url);\n    const scope = this;\n    const cached = Cache.get(url);\n    if (cached !== undefined) {\n      scope.manager.itemStart(url);\n      setTimeout(function () {\n        if (onLoad) onLoad(cached);\n        scope.manager.itemEnd(url);\n      }, 0);\n      return cached;\n    }\n    const fetchOptions = {};\n    fetchOptions.credentials = this.crossOrigin === 'anonymous' ? 'same-origin' : 'include';\n    fetchOptions.headers = this.requestHeader;\n    fetch(url, fetchOptions).then(function (res) {\n      return res.blob();\n    }).then(function (blob) {\n      return createImageBitmap(blob, Object.assign(scope.options, {\n        colorSpaceConversion: 'none'\n      }));\n    }).then(function (imageBitmap) {\n      Cache.add(url, imageBitmap);\n      if (onLoad) onLoad(imageBitmap);\n      scope.manager.itemEnd(url);\n    }).catch(function (e) {\n      if (onError) onError(e);\n      scope.manager.itemError(url);\n      scope.manager.itemEnd(url);\n    });\n    scope.manager.itemStart(url);\n  }\n}\nexport { ImageBitmapLoader };","map":{"version":3,"names":["Cache","Loader","ImageBitmapLoader","constructor","manager","isImageBitmapLoader","createImageBitmap","console","warn","fetch","options","premultiplyAlpha","setOptions","load","url","onLoad","onProgress","onError","undefined","path","resolveURL","scope","cached","get","itemStart","setTimeout","itemEnd","fetchOptions","credentials","crossOrigin","headers","requestHeader","then","res","blob","Object","assign","colorSpaceConversion","imageBitmap","add","catch","e","itemError"],"sources":["C:/Users/dro1l/source/repos/StaffWork/staffwork.client/node_modules/three/src/loaders/ImageBitmapLoader.js"],"sourcesContent":["import { Cache } from './Cache.js';\nimport { Loader } from './Loader.js';\n\nclass ImageBitmapLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.isImageBitmapLoader = true;\n\n\t\tif ( typeof createImageBitmap === 'undefined' ) {\n\n\t\t\tconsole.warn( 'THREE.ImageBitmapLoader: createImageBitmap() not supported.' );\n\n\t\t}\n\n\t\tif ( typeof fetch === 'undefined' ) {\n\n\t\t\tconsole.warn( 'THREE.ImageBitmapLoader: fetch() not supported.' );\n\n\t\t}\n\n\t\tthis.options = { premultiplyAlpha: 'none' };\n\n\t}\n\n\tsetOptions( options ) {\n\n\t\tthis.options = options;\n\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst fetchOptions = {};\n\t\tfetchOptions.credentials = ( this.crossOrigin === 'anonymous' ) ? 'same-origin' : 'include';\n\t\tfetchOptions.headers = this.requestHeader;\n\n\t\tfetch( url, fetchOptions ).then( function ( res ) {\n\n\t\t\treturn res.blob();\n\n\t\t} ).then( function ( blob ) {\n\n\t\t\treturn createImageBitmap( blob, Object.assign( scope.options, { colorSpaceConversion: 'none' } ) );\n\n\t\t} ).then( function ( imageBitmap ) {\n\n\t\t\tCache.add( url, imageBitmap );\n\n\t\t\tif ( onLoad ) onLoad( imageBitmap );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} ).catch( function ( e ) {\n\n\t\t\tif ( onError ) onError( e );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} );\n\n\t\tscope.manager.itemStart( url );\n\n\t}\n\n}\n\nexport { ImageBitmapLoader };\n"],"mappings":"AAAA,SAASA,KAAK,QAAQ,YAAY;AAClC,SAASC,MAAM,QAAQ,aAAa;AAEpC,MAAMC,iBAAiB,SAASD,MAAM,CAAC;EAEtCE,WAAW,CAAEC,OAAO,EAAG;IAEtB,KAAK,CAAEA,OAAO,CAAE;IAEhB,IAAI,CAACC,mBAAmB,GAAG,IAAI;IAE/B,IAAK,OAAOC,iBAAiB,KAAK,WAAW,EAAG;MAE/CC,OAAO,CAACC,IAAI,CAAE,6DAA6D,CAAE;IAE9E;IAEA,IAAK,OAAOC,KAAK,KAAK,WAAW,EAAG;MAEnCF,OAAO,CAACC,IAAI,CAAE,iDAAiD,CAAE;IAElE;IAEA,IAAI,CAACE,OAAO,GAAG;MAAEC,gBAAgB,EAAE;IAAO,CAAC;EAE5C;EAEAC,UAAU,CAAEF,OAAO,EAAG;IAErB,IAAI,CAACA,OAAO,GAAGA,OAAO;IAEtB,OAAO,IAAI;EAEZ;EAEAG,IAAI,CAAEC,GAAG,EAAEC,MAAM,EAAEC,UAAU,EAAEC,OAAO,EAAG;IAExC,IAAKH,GAAG,KAAKI,SAAS,EAAGJ,GAAG,GAAG,EAAE;IAEjC,IAAK,IAAI,CAACK,IAAI,KAAKD,SAAS,EAAGJ,GAAG,GAAG,IAAI,CAACK,IAAI,GAAGL,GAAG;IAEpDA,GAAG,GAAG,IAAI,CAACV,OAAO,CAACgB,UAAU,CAAEN,GAAG,CAAE;IAEpC,MAAMO,KAAK,GAAG,IAAI;IAElB,MAAMC,MAAM,GAAGtB,KAAK,CAACuB,GAAG,CAAET,GAAG,CAAE;IAE/B,IAAKQ,MAAM,KAAKJ,SAAS,EAAG;MAE3BG,KAAK,CAACjB,OAAO,CAACoB,SAAS,CAAEV,GAAG,CAAE;MAE9BW,UAAU,CAAE,YAAY;QAEvB,IAAKV,MAAM,EAAGA,MAAM,CAAEO,MAAM,CAAE;QAE9BD,KAAK,CAACjB,OAAO,CAACsB,OAAO,CAAEZ,GAAG,CAAE;MAE7B,CAAC,EAAE,CAAC,CAAE;MAEN,OAAOQ,MAAM;IAEd;IAEA,MAAMK,YAAY,GAAG,CAAC,CAAC;IACvBA,YAAY,CAACC,WAAW,GAAK,IAAI,CAACC,WAAW,KAAK,WAAW,GAAK,aAAa,GAAG,SAAS;IAC3FF,YAAY,CAACG,OAAO,GAAG,IAAI,CAACC,aAAa;IAEzCtB,KAAK,CAAEK,GAAG,EAAEa,YAAY,CAAE,CAACK,IAAI,CAAE,UAAWC,GAAG,EAAG;MAEjD,OAAOA,GAAG,CAACC,IAAI,EAAE;IAElB,CAAC,CAAE,CAACF,IAAI,CAAE,UAAWE,IAAI,EAAG;MAE3B,OAAO5B,iBAAiB,CAAE4B,IAAI,EAAEC,MAAM,CAACC,MAAM,CAAEf,KAAK,CAACX,OAAO,EAAE;QAAE2B,oBAAoB,EAAE;MAAO,CAAC,CAAE,CAAE;IAEnG,CAAC,CAAE,CAACL,IAAI,CAAE,UAAWM,WAAW,EAAG;MAElCtC,KAAK,CAACuC,GAAG,CAAEzB,GAAG,EAAEwB,WAAW,CAAE;MAE7B,IAAKvB,MAAM,EAAGA,MAAM,CAAEuB,WAAW,CAAE;MAEnCjB,KAAK,CAACjB,OAAO,CAACsB,OAAO,CAAEZ,GAAG,CAAE;IAE7B,CAAC,CAAE,CAAC0B,KAAK,CAAE,UAAWC,CAAC,EAAG;MAEzB,IAAKxB,OAAO,EAAGA,OAAO,CAAEwB,CAAC,CAAE;MAE3BpB,KAAK,CAACjB,OAAO,CAACsC,SAAS,CAAE5B,GAAG,CAAE;MAC9BO,KAAK,CAACjB,OAAO,CAACsB,OAAO,CAAEZ,GAAG,CAAE;IAE7B,CAAC,CAAE;IAEHO,KAAK,CAACjB,OAAO,CAACoB,SAAS,CAAEV,GAAG,CAAE;EAE/B;AAED;AAEA,SAASZ,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}