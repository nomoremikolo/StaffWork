{"ast":null,"code":"import _slicedToArray from\"C:/Users/dro1l/source/repos/StaffWork/staffwork.client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useAppDispatch,useAppSelector}from\"../../hooks/redux\";import{fetch_all_categories,fetch_all_wares,fetch_discount_wares,fetch_discount_wares_authorized}from\"../../redux/action_creators/ware_action_creator\";import{CaretDown,CaretUp}from\"react-bootstrap-icons\";import WareMockup from\"../../components/WareMockup\";import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AllWares=function AllWares(){var dispatch=useAppDispatch();var _useParams=useParams(),category=_useParams.category;var _useAppSelector=useAppSelector(function(state){return state.wareReducer.allWares;}),isLoading=_useAppSelector.isLoading,errors=_useAppSelector.errors,wares=_useAppSelector.wares;var _useAppSelector2=useAppSelector(function(state){return state.authorizationReducer;}),isAuthorized=_useAppSelector2.isAuthorized;var _useState=useState({value:\"Name\",isReverse:false}),_useState2=_slicedToArray(_useState,2),sortField=_useState2[0],setSortField=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),categoryId=_useState4[0],setCategoryId=_useState4[1];var _useState5=useState(12),_useState6=_slicedToArray(_useState5,2),countOfRecords=_useState6[0],setCountOfRecords=_useState6[1];var categories=useAppSelector(function(state){return state.wareReducer.allCategories.categories;});useEffect(function(){fetch_all();},[sortField,categoryId,isAuthorized,countOfRecords]);useEffect(function(){dispatch(fetch_all_categories());},[]);var fetch_all=function fetch_all(){isAuthorized?dispatch(fetch_all_wares({sortBy:{value:sortField.value,isReverse:sortField.isReverse},categoryId:categoryId===null?null:categoryId,countOfRecords:countOfRecords})):dispatch(fetch_all_wares({sortBy:{value:sortField.value,isReverse:sortField.isReverse},categoryId:categoryId===null?null:categoryId,countOfRecords:countOfRecords}));};var changeSortHandler=function changeSortHandler(field){if(field===\"PriceUp\")setSortField({value:\"Price\",isReverse:false});if(field===\"PriceDown\")setSortField({value:\"Price\",isReverse:true});};useEffect(function(){if(category!=null){setCategoryId(Number(category));}else{setCategoryId(null);}},[category]);document.title=\"All Wares\";return/*#__PURE__*/_jsxs(\"div\",{className:\"container d-block mb-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-block\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:'text-center row mt-3',children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Sort \",sortField.isReverse?/*#__PURE__*/_jsx(CaretDown,{}):/*#__PURE__*/_jsx(CaretUp,{})]}),/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(e){return changeSortHandler(e.currentTarget.value);},className:'form-select',children:[/*#__PURE__*/_jsx(\"option\",{value:\"PriceUp\",children:\"Cheaper\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PriceDown\",children:\"More expensive\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Category\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(e){return setCategoryId(e.currentTarget.value!==\"\"?Number(e.currentTarget.value):null);},className:'form-select py-0',children:[/*#__PURE__*/_jsx(\"option\",{value:\"\"}),categories===null||categories===void 0?void 0:categories.map(function(item){return/*#__PURE__*/_jsx(\"option\",{value:item.id,children:item.name});})]}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(e){setCategoryId(null);e.currentTarget.previousElementSibling.value=\"\";},className:\"input-group-text hover\",children:\"CLEAR\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"d-flex input-group-sm mt-3\",role:\"search\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control py-0\",type:\"search\",placeholder:\"Search by name\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){dispatch(isAuthorized?fetch_discount_wares_authorized({keyWords:e.currentTarget.previousElementSibling.value}):fetch_discount_wares({keyWords:e.currentTarget.previousElementSibling.value}));e.preventDefault();},className:\"btn btn-outline-success\",type:\"submit\",children:\"Search\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){fetch_all();e.preventDefault();e.currentTarget.previousElementSibling.previousElementSibling.value=\"\";},className:'btn btn-outline-primary',children:\"Reset\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-xxl-start row\",children:wares===null||wares===void 0?void 0:wares.map(function(item){return/*#__PURE__*/_jsx(WareMockup,{item:item},item.id);})}),wares.length>=countOfRecords?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return setCountOfRecords(countOfRecords+12);},className:'btn btn-outline-secondary position-absolute start-50 mt-5 mb-5 py-1',children:\"More\"}):/*#__PURE__*/_jsx(_Fragment,{})]});};export default AllWares;","map":{"version":3,"names":["React","useEffect","useState","useAppDispatch","useAppSelector","fetch_all_categories","fetch_all_wares","fetch_discount_wares","fetch_discount_wares_authorized","CaretDown","CaretUp","WareMockup","useParams","AllWares","dispatch","category","state","wareReducer","allWares","isLoading","errors","wares","authorizationReducer","isAuthorized","value","isReverse","sortField","setSortField","categoryId","setCategoryId","countOfRecords","setCountOfRecords","categories","allCategories","fetch_all","sortBy","changeSortHandler","field","Number","document","title","e","currentTarget","map","item","id","name","previousElementSibling","keyWords","preventDefault","length"],"sources":["C:/Users/dro1l/source/repos/StaffWork/staffwork.client/src/pages/AllWares/AllWares.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {useAppDispatch, useAppSelector} from \"../../hooks/redux\";\r\nimport {\r\n    fetch_all_categories, fetch_all_wares,\r\n    fetch_discount_wares,\r\n    fetch_discount_wares_authorized\r\n} from \"../../redux/action_creators/ware_action_creator\";\r\nimport {CaretDown, CaretUp} from \"react-bootstrap-icons\";\r\nimport WareMockup from \"../../components/WareMockup\";\r\nimport {useParams} from \"react-router-dom\";\r\n\r\nconst AllWares = () => {\r\n    const dispatch = useAppDispatch()\r\n    const {category} = useParams()\r\n    const {isLoading,errors,wares} = useAppSelector(state => state.wareReducer.allWares)\r\n    const {isAuthorized} = useAppSelector(state => state.authorizationReducer)\r\n    const [sortField, setSortField] = useState({value: \"Name\", isReverse: false})\r\n    const [categoryId, setCategoryId] = useState<number | null>(null)\r\n    const [countOfRecords, setCountOfRecords] = useState(12)\r\n    const categories = useAppSelector(state => state.wareReducer.allCategories.categories)\r\n\r\n    useEffect(() => {\r\n        fetch_all()\r\n    }, [sortField, categoryId, isAuthorized, countOfRecords])\r\n    useEffect(() => {\r\n        dispatch(fetch_all_categories())\r\n    }, [])\r\n    const fetch_all = () => {\r\n        isAuthorized ? dispatch(fetch_all_wares({\r\n            sortBy: {value: sortField.value, isReverse: sortField.isReverse},\r\n            categoryId: categoryId === null ? null : categoryId,\r\n            countOfRecords: countOfRecords\r\n        })) : dispatch(fetch_all_wares({\r\n            sortBy: {value: sortField.value, isReverse: sortField.isReverse},\r\n            categoryId: categoryId === null ? null : categoryId,\r\n            countOfRecords: countOfRecords\r\n        }))\r\n    }\r\n    const changeSortHandler = (field: string) => {\r\n        if (field === \"PriceUp\")\r\n            setSortField({value: \"Price\", isReverse: false})\r\n\r\n        if (field === \"PriceDown\")\r\n            setSortField({value: \"Price\", isReverse: true})\r\n    }\r\n    useEffect(() => {\r\n        if(category != null){\r\n            setCategoryId(Number(category))\r\n        }\r\n        else {\r\n            setCategoryId(null)\r\n        }\r\n    }, [category])\r\n    document.title = \"All Wares\"\r\n    return (\r\n        <div className=\"container d-block mb-5\">\r\n            <div className=\"d-block\">\r\n                <br/>\r\n                <br/>\r\n                <div className={'text-center row mt-3'}>\r\n                    <div className=\"col\">\r\n                        <p>Sort {sortField.isReverse ? <CaretDown/> : <CaretUp/>}</p>\r\n                        <select onChange={e => changeSortHandler(e.currentTarget.value)}\r\n                                className={'form-select'}>\r\n                            <option value=\"PriceUp\">Cheaper</option>\r\n                            <option value=\"PriceDown\">More expensive</option>\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <p>Category</p>\r\n                        <div className=\"input-group\">\r\n                            <select onChange={(e) => setCategoryId(e.currentTarget.value !== \"\" ? Number(e.currentTarget.value) : null)} className={'form-select py-0'}>\r\n                                <option value=\"\"></option>\r\n                                {categories?.map(item => (\r\n                                    <option value={item.id}>{item.name}</option>\r\n                                ))}\r\n                            </select>\r\n                            <span onClick={(e:any) => {setCategoryId(null);e.currentTarget.previousElementSibling.value = \"\"}} className=\"input-group-text hover\">CLEAR</span>\r\n                        </div>\r\n                    </div>\r\n                    <form className=\"d-flex input-group-sm mt-3\" role=\"search\">\r\n                        <input className=\"form-control py-0\" type=\"search\" placeholder=\"Search by name\"/>\r\n                        <button onClick={(e: any) => {\r\n                            dispatch(isAuthorized ? fetch_discount_wares_authorized({keyWords: e.currentTarget.previousElementSibling!.value}) : fetch_discount_wares({keyWords: e.currentTarget.previousElementSibling!.value}));\r\n                            e.preventDefault()\r\n                        }} className=\"btn btn-outline-success\" type=\"submit\">Search\r\n                        </button>\r\n                        <button onClick={(e:any) => {fetch_all();e.preventDefault();e.currentTarget.previousElementSibling!.previousElementSibling!.value = \"\"}} className={'btn btn-outline-primary'}>Reset</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n            <div className=\"text-center text-xxl-start row\">\r\n                {wares?.map(item =>\r\n                    <WareMockup key={item.id} item={item}/>\r\n                )}\r\n            </div>\r\n            {wares.length >= countOfRecords ? <button onClick={e => setCountOfRecords(countOfRecords+12)} className={'btn btn-outline-secondary position-absolute start-50 mt-5 mb-5 py-1'}>More</button> : <></>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AllWares;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}