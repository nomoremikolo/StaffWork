{"ast":null,"code":"import React,{useEffect}from'react';import{Modal}from\"react-bootstrap\";import{useAppDispatch,useAppSelector}from\"../../hooks/redux\";import{Heartbreak,HeartFill}from\"react-bootstrap-icons\";import ReactDOM from'react-dom';import{fetch_discount_wares_authorized,fetch_favorite_wares,remove_from_favorite}from\"../../redux/action_creators/ware_action_creator\";import{Link}from\"react-router-dom\";import{ImagesEndpoint}from\"../../global_variables\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FavoriteWaresModal=function FavoriteWaresModal(_ref){var show=_ref.show,closeHandler=_ref.closeHandler;var dispatch=useAppDispatch();var _useAppSelector=useAppSelector(function(state){return state.authorizationReducer;}),isAuthorized=_useAppSelector.isAuthorized;var _useAppSelector2=useAppSelector(function(state){return state.wareReducer;}),favoriteWares=_useAppSelector2.favoriteWares;useEffect(function(){dispatch(fetch_favorite_wares());},[]);useEffect(function(){dispatch(fetch_favorite_wares());},[show]);if(!show)return null;return/*#__PURE__*/ReactDOM.createPortal(/*#__PURE__*/_jsxs(Modal,{className:'modal-md',show:show,onHide:closeHandler,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Favorite wares\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:!isAuthorized?/*#__PURE__*/_jsxs(\"h3\",{className:'text-center my-4',children:[\"\\u0412\\u0438 \\u043D\\u0435 \\u0430\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u043E\\u0432\\u0430\\u043D\\u0456 \",/*#__PURE__*/_jsx(Heartbreak,{className:'mb-1'})]}):/*#__PURE__*/_jsx(_Fragment,{children:favoriteWares.length>0?favoriteWares.map(function(item){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card mx-auto mb-3\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn position-absolute bottom-0 end-0\",onClick:function onClick(){return dispatch(remove_from_favorite(item.wareId,function(){dispatch(fetch_favorite_wares());dispatch(fetch_discount_wares_authorized());}));},children:/*#__PURE__*/_jsx(HeartFill,{height:20,width:20})}),/*#__PURE__*/_jsx(\"img\",{style:{\"width\":\"100%\",height:350,\"margin\":\"auto\",objectFit:'cover'},src:\"\".concat(ImagesEndpoint,\"/Get/\").concat(item.thumbnail),className:\"card-img-top pt-2\",alt:\"...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:item.name}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:item.sizes}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text \".concat(item.isDiscount?'text-danger':''),children:[item.price,\" \\u0433\\u0440\\u043D.\"]}),item.isDiscount?/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:/*#__PURE__*/_jsxs(\"del\",{children:[item.oldPrice,\" \\u0433\\u0440\\u043D.\"]})}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(Link,{onClick:closeHandler,to:\"/Wares/\".concat(item.wareId),className:\"btn btn-primary\",children:\"More\"})]})]})});}):/*#__PURE__*/_jsx(\"p\",{children:\"Oops, it's empty\"})})})]}),document.getElementById('portal'));};export default FavoriteWaresModal;","map":{"version":3,"names":["React","useEffect","Modal","useAppDispatch","useAppSelector","Heartbreak","HeartFill","ReactDOM","fetch_discount_wares_authorized","fetch_favorite_wares","remove_from_favorite","Link","ImagesEndpoint","FavoriteWaresModal","show","closeHandler","dispatch","state","authorizationReducer","isAuthorized","wareReducer","favoriteWares","createPortal","length","map","item","wareId","height","objectFit","thumbnail","name","sizes","isDiscount","price","oldPrice","document","getElementById"],"sources":["C:/Users/dro1l/source/repos/StaffWork/staffwork.client/src/pages/Layout/FavoriteWaresModal.tsx"],"sourcesContent":["import React, {FC, useEffect} from 'react';\r\nimport {Modal} from \"react-bootstrap\";\r\nimport {useAppDispatch, useAppSelector} from \"../../hooks/redux\";\r\nimport {Heart, Heartbreak, HeartFill} from \"react-bootstrap-icons\";\r\nimport ReactDOM from 'react-dom'\r\nimport {\r\n    fetch_all_wares_with_favorites,\r\n    fetch_discount_wares_authorized,\r\n    fetch_favorite_wares,\r\n    remove_from_favorite\r\n} from \"../../redux/action_creators/ware_action_creator\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {ImagesEndpoint} from \"../../global_variables\";\r\n\r\ninterface IFavoriteWares {\r\n    show: boolean,\r\n    closeHandler: () => void,\r\n}\r\n\r\nconst FavoriteWaresModal: FC<IFavoriteWares> = ({show, closeHandler}) => {\r\n    const dispatch = useAppDispatch()\r\n    const {isAuthorized} = useAppSelector(state => state.authorizationReducer)\r\n    const {favoriteWares} = useAppSelector(state => state.wareReducer)\r\n    useEffect(() => {\r\n        dispatch(fetch_favorite_wares())\r\n    }, [])\r\n    useEffect(() => {\r\n        dispatch(fetch_favorite_wares())\r\n    }, [show])\r\n    if (!show) return null\r\n    return ReactDOM.createPortal(\r\n        <Modal className={'modal-md'} show={show} onHide={closeHandler}>\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>Favorite wares</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                {!isAuthorized ?\r\n                    <h3 className={'text-center my-4'}>Ви не авторизовані <Heartbreak className={'mb-1'}/></h3> :\r\n                    <>\r\n                        {favoriteWares.length > 0 ?\r\n                            favoriteWares.map(item => (\r\n                                    <>\r\n                                        <div className=\"card mx-auto mb-3\">\r\n                                            <button className=\"btn position-absolute bottom-0 end-0\" onClick={() => dispatch(remove_from_favorite(item.wareId!,() => {\r\n                                                dispatch(fetch_favorite_wares())\r\n                                                dispatch(fetch_discount_wares_authorized())\r\n                                            }))}><HeartFill height={20} width={20}/></button>\r\n                                            <img style={{\"width\": \"100%\",height: 350, \"margin\": \"auto\", objectFit: 'cover'}}\r\n                                                 src={`${ImagesEndpoint}/Get/${item.thumbnail}`}\r\n                                                 className=\"card-img-top pt-2\" alt=\"...\"/>\r\n                                            <div className=\"card-body\">\r\n                                                <h5 className=\"card-title\">{item.name}</h5>\r\n                                                <p className=\"card-text\">{item.sizes}</p>\r\n                                                <p className={`card-text ${item.isDiscount ? 'text-danger' : ''}`}>{item.price} грн.</p>\r\n                                                {item.isDiscount ? <p className=\"card-text\">\r\n                                                    <del>{item.oldPrice} грн.</del>\r\n                                                </p> : <></>\r\n                                                }\r\n                                                <Link onClick={closeHandler} to={`/Wares/${item.wareId!}`}\r\n                                                      className=\"btn btn-primary\">More</Link>\r\n                                            </div>\r\n                                        </div>\r\n                                    </>\r\n                                )\r\n                            )\r\n                            : <p>Oops, it's empty</p>}\r\n                    </>\r\n                }\r\n\r\n            </Modal.Body>\r\n        </Modal>,\r\n        document.getElementById('portal') as HTMLElement\r\n    );\r\n};\r\n\r\nexport default FavoriteWaresModal;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}