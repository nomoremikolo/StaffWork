{"ast":null,"code":"import _slicedToArray from\"C:/Users/dro1l/source/repos/StaffWork/staffwork.client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useAppDispatch,useAppSelector}from\"../../hooks/redux\";import{fetch_all_categories,fetch_novelty_wares,fetch_novelty_wares_authorized}from\"../../redux/action_creators/ware_action_creator\";import{CaretDown,CaretUp}from\"react-bootstrap-icons\";import WareMockup from\"../../components/WareMockup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Novelty=function Novelty(){var dispatch=useAppDispatch();var _useAppSelector=useAppSelector(function(state){return state.wareReducer;}),error=_useAppSelector.error,isLoading=_useAppSelector.isLoading,noveltyWares=_useAppSelector.noveltyWares;var _useAppSelector2=useAppSelector(function(state){return state.authorizationReducer;}),isAuthorized=_useAppSelector2.isAuthorized;var _useState=useState({value:\"Name\",isReverse:false}),_useState2=_slicedToArray(_useState,2),sortField=_useState2[0],setSortField=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),categoryId=_useState4[0],setCategoryId=_useState4[1];var categories=useAppSelector(function(state){return state.wareReducer.allCategories.categories;});var _useState5=useState(12),_useState6=_slicedToArray(_useState5,2),countOfRecords=_useState6[0],setCountOfRecords=_useState6[1];useEffect(function(){fetch_all();},[sortField,categoryId,isAuthorized,countOfRecords]);useEffect(function(){dispatch(fetch_all_categories());},[]);var fetch_all=function fetch_all(){isAuthorized?dispatch(fetch_novelty_wares_authorized({sortBy:{value:sortField.value,isReverse:sortField.isReverse},categoryId:categoryId===null?null:categoryId,countOfRecords:countOfRecords})):dispatch(fetch_novelty_wares({sortBy:{value:sortField.value,isReverse:sortField.isReverse},categoryId:categoryId===null?null:categoryId,countOfRecords:countOfRecords}));};var changeSortHandler=function changeSortHandler(field){if(field===\"PriceUp\")setSortField({value:\"Price\",isReverse:false});if(field===\"PriceDown\")setSortField({value:\"Price\",isReverse:true});};document.title=\"Novelty\";return/*#__PURE__*/_jsxs(\"div\",{className:\"container d-block\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-block\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:'text-center row mt-3',children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Sort \",sortField.isReverse?/*#__PURE__*/_jsx(CaretDown,{}):/*#__PURE__*/_jsx(CaretUp,{})]}),/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(e){return changeSortHandler(e.currentTarget.value);},className:'form-select',children:[/*#__PURE__*/_jsx(\"option\",{value:\"PriceUp\",children:\"Cheaper\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PriceDown\",children:\"More expensive\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Category\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"select\",{onChange:function onChange(e){return setCategoryId(Number(e.currentTarget.value));},className:'form-select py-0',children:categories===null||categories===void 0?void 0:categories.map(function(item){return/*#__PURE__*/_jsx(\"option\",{value:item.id,children:item.name});})}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(e){setCategoryId(null);e.currentTarget.previousElementSibling.value=\"\";},className:\"input-group-text hover\",children:\"CLEAR\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"d-flex input-group-sm mt-3\",role:\"search\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control py-0\",type:\"search\",placeholder:\"Search by name\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){dispatch(isAuthorized?fetch_novelty_wares_authorized({keyWords:e.currentTarget.previousElementSibling.value}):fetch_novelty_wares({keyWords:e.currentTarget.previousElementSibling.value}));e.preventDefault();},className:\"btn btn-outline-success\",type:\"submit\",children:\"Search\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){fetch_all();e.preventDefault();e.currentTarget.previousElementSibling.previousElementSibling.value=\"\";},className:'btn btn-outline-primary',children:\"Reset\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-xxl-start row\",children:noveltyWares===null||noveltyWares===void 0?void 0:noveltyWares.map(function(item){return/*#__PURE__*/_jsx(WareMockup,{item:item},item.id);})}),noveltyWares.length>=countOfRecords?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return setCountOfRecords(countOfRecords+12);},className:'btn btn-outline-secondary position-absolute start-50 mt-5 mb-5 py-1',children:\"More\"}):/*#__PURE__*/_jsx(_Fragment,{})]});};export default Novelty;","map":{"version":3,"names":["React","useEffect","useState","useAppDispatch","useAppSelector","fetch_all_categories","fetch_novelty_wares","fetch_novelty_wares_authorized","CaretDown","CaretUp","WareMockup","Novelty","dispatch","state","wareReducer","error","isLoading","noveltyWares","authorizationReducer","isAuthorized","value","isReverse","sortField","setSortField","categoryId","setCategoryId","categories","allCategories","countOfRecords","setCountOfRecords","fetch_all","sortBy","changeSortHandler","field","document","title","e","currentTarget","Number","map","item","id","name","previousElementSibling","keyWords","preventDefault","length"],"sources":["C:/Users/dro1l/source/repos/StaffWork/staffwork.client/src/pages/Novelty/Novelty.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {useAppDispatch, useAppSelector} from \"../../hooks/redux\";\r\nimport {\r\n    fetch_all_categories,\r\n    fetch_all_wares,\r\n    fetch_discount_wares, fetch_discount_wares_authorized, fetch_favorite_wares,\r\n    fetch_novelty_wares, fetch_novelty_wares_authorized\r\n} from \"../../redux/action_creators/ware_action_creator\";\r\nimport {CaretDown, CaretUp} from \"react-bootstrap-icons\";\r\nimport WareMockup from \"../../components/WareMockup\";\r\nimport Loading from \"../Layout/Loading\";\r\n\r\nconst Novelty = () => {\r\n    const dispatch = useAppDispatch()\r\n    const {error,isLoading,noveltyWares} = useAppSelector(state => state.wareReducer)\r\n    const {isAuthorized} = useAppSelector(state => state.authorizationReducer)\r\n    const [sortField, setSortField] = useState({value: \"Name\", isReverse: false})\r\n    const [categoryId, setCategoryId] = useState<number | null>(null)\r\n    const categories = useAppSelector(state => state.wareReducer.allCategories.categories)\r\n    const [countOfRecords, setCountOfRecords] = useState(12)\r\n\r\n    useEffect(() => {\r\n        fetch_all()\r\n    }, [sortField, categoryId,  isAuthorized, countOfRecords])\r\n    useEffect(() => {\r\n        dispatch(fetch_all_categories())\r\n    }, [])\r\n    const fetch_all = () => {\r\n        isAuthorized ? dispatch(fetch_novelty_wares_authorized({\r\n            sortBy: {value: sortField.value, isReverse: sortField.isReverse},\r\n            categoryId: categoryId === null ? null : categoryId,\r\n            countOfRecords: countOfRecords\r\n        })) : dispatch(fetch_novelty_wares({\r\n            sortBy: {value: sortField.value, isReverse: sortField.isReverse},\r\n            categoryId: categoryId === null ? null : categoryId,\r\n            countOfRecords: countOfRecords\r\n        }))\r\n    }\r\n    const changeSortHandler = (field: string) => {\r\n        if (field === \"PriceUp\")\r\n            setSortField({value: \"Price\", isReverse: false})\r\n\r\n        if (field === \"PriceDown\")\r\n            setSortField({value: \"Price\", isReverse: true})\r\n    }\r\n\r\n    document.title = \"Novelty\"\r\n    return (\r\n        <div className=\"container d-block\">\r\n            <div className=\"d-block\">\r\n                <br/>\r\n                <br/>\r\n                <div className={'text-center row mt-3'}>\r\n                    <div className=\"col\">\r\n                        <p>Sort {sortField.isReverse ? <CaretDown/> : <CaretUp/>}</p>\r\n                        <select onChange={e => changeSortHandler(e.currentTarget.value)}\r\n                                className={'form-select'}>\r\n                            <option value=\"PriceUp\">Cheaper</option>\r\n                            <option value=\"PriceDown\">More expensive</option>\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <p>Category</p>\r\n                        <div className=\"input-group\">\r\n                            <select onChange={(e) => setCategoryId(Number(e.currentTarget.value))} className={'form-select py-0'}>\r\n                                {categories?.map(item => (\r\n                                    <option value={item.id}>{item.name}</option>\r\n                                ))}\r\n                            </select>\r\n                            <span onClick={(e:any) => {setCategoryId(null);e.currentTarget.previousElementSibling.value = \"\"}} className=\"input-group-text hover\">CLEAR</span>\r\n                        </div>\r\n                    </div>\r\n                    <form className=\"d-flex input-group-sm mt-3\" role=\"search\">\r\n                        <input className=\"form-control py-0\" type=\"search\" placeholder=\"Search by name\"/>\r\n                        <button onClick={(e: any) => {\r\n                            dispatch(isAuthorized ? fetch_novelty_wares_authorized({keyWords: e.currentTarget.previousElementSibling!.value}) : fetch_novelty_wares({keyWords: e.currentTarget.previousElementSibling!.value}));\r\n                            e.preventDefault()\r\n                        }} className=\"btn btn-outline-success\" type=\"submit\">Search\r\n                        </button>\r\n                        <button onClick={(e:any) => {fetch_all();e.preventDefault();e.currentTarget.previousElementSibling!.previousElementSibling!.value = \"\"}} className={'btn btn-outline-primary'}>Reset</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n            <div className=\"text-center text-xxl-start row\">\r\n                {noveltyWares?.map(item =>\r\n                    <WareMockup key={item.id} item={item}/>\r\n                )}\r\n            </div>\r\n            {noveltyWares.length >= countOfRecords ? <button onClick={e => setCountOfRecords(countOfRecords+12)} className={'btn btn-outline-secondary position-absolute start-50 mt-5 mb-5 py-1'}>More</button> : <></>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Novelty;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}