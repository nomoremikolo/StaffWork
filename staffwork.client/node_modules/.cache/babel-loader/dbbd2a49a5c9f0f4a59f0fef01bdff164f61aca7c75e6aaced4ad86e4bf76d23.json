{"ast":null,"code":"import { Vector3 } from 'three';\nimport Node from '../core/Node.js';\nimport UniformNode from '../core/UniformNode.js';\nimport { NodeUpdateType } from '../core/constants.js';\nclass Object3DNode extends Node {\n  static VIEW_MATRIX = 'viewMatrix';\n  static NORMAL_MATRIX = 'normalMatrix';\n  static WORLD_MATRIX = 'worldMatrix';\n  static POSITION = 'position';\n  static VIEW_POSITION = 'viewPosition';\n  constructor() {\n    let scope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Object3DNode.VIEW_MATRIX;\n    let object3d = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    super();\n    this.scope = scope;\n    this.object3d = object3d;\n    this.updateType = NodeUpdateType.OBJECT;\n    this._uniformNode = new UniformNode(null);\n  }\n  getNodeType() {\n    const scope = this.scope;\n    if (scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX) {\n      return 'mat4';\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      return 'mat3';\n    } else if (scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION) {\n      return 'vec3';\n    }\n  }\n  update(frame) {\n    const object = this.object3d;\n    const uniformNode = this._uniformNode;\n    const scope = this.scope;\n    if (scope === Object3DNode.VIEW_MATRIX) {\n      uniformNode.value = object.modelViewMatrix;\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      uniformNode.value = object.normalMatrix;\n    } else if (scope === Object3DNode.WORLD_MATRIX) {\n      uniformNode.value = object.matrixWorld;\n    } else if (scope === Object3DNode.POSITION) {\n      uniformNode.value.setFromMatrixPosition(object.matrixWorld);\n    } else if (scope === Object3DNode.VIEW_POSITION) {\n      const camera = frame.camera;\n      uniformNode.value = uniformNode.value || new Vector3();\n      uniformNode.value.setFromMatrixPosition(object.matrixWorld);\n      uniformNode.value.applyMatrix4(camera.matrixWorldInverse);\n    }\n  }\n  generate(builder) {\n    const scope = this.scope;\n    if (scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX) {\n      this._uniformNode.nodeType = 'mat4';\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      this._uniformNode.nodeType = 'mat3';\n    } else if (scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION) {\n      this._uniformNode.nodeType = 'vec3';\n    }\n    return this._uniformNode.build(builder);\n  }\n  serialize(data) {\n    super.serialize(data);\n    data.scope = this.scope;\n  }\n  deserialize(data) {\n    super.deserialize(data);\n    this.scope = data.scope;\n  }\n}\nexport default Object3DNode;","map":{"version":3,"names":["Vector3","Node","UniformNode","NodeUpdateType","Object3DNode","VIEW_MATRIX","NORMAL_MATRIX","WORLD_MATRIX","POSITION","VIEW_POSITION","constructor","scope","object3d","updateType","OBJECT","_uniformNode","getNodeType","update","frame","object","uniformNode","value","modelViewMatrix","normalMatrix","matrixWorld","setFromMatrixPosition","camera","applyMatrix4","matrixWorldInverse","generate","builder","nodeType","build","serialize","data","deserialize"],"sources":["C:/Users/dro1l/source/repos/StaffWork/staffwork.client/node_modules/three/examples/jsm/nodes/accessors/Object3DNode.js"],"sourcesContent":["import { Vector3 } from 'three';\nimport Node from '../core/Node.js';\nimport UniformNode from '../core/UniformNode.js';\nimport { NodeUpdateType } from '../core/constants.js';\n\nclass Object3DNode extends Node {\n\n\tstatic VIEW_MATRIX = 'viewMatrix';\n\tstatic NORMAL_MATRIX = 'normalMatrix';\n\tstatic WORLD_MATRIX = 'worldMatrix';\n\tstatic POSITION = 'position';\n\tstatic VIEW_POSITION = 'viewPosition';\n\n\tconstructor( scope = Object3DNode.VIEW_MATRIX, object3d = null ) {\n\n\t\tsuper();\n\n\t\tthis.scope = scope;\n\t\tthis.object3d = object3d;\n\n\t\tthis.updateType = NodeUpdateType.OBJECT;\n\n\t\tthis._uniformNode = new UniformNode( null );\n\n\t}\n\n\tgetNodeType() {\n\n\t\tconst scope = this.scope;\n\n\t\tif ( scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX ) {\n\n\t\t\treturn 'mat4';\n\n\t\t} else if ( scope === Object3DNode.NORMAL_MATRIX ) {\n\n\t\t\treturn 'mat3';\n\n\t\t} else if ( scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION ) {\n\n\t\t\treturn 'vec3';\n\n\t\t}\n\n\t}\n\n\tupdate( frame ) {\n\n\t\tconst object = this.object3d;\n\t\tconst uniformNode = this._uniformNode;\n\t\tconst scope = this.scope;\n\n\t\tif ( scope === Object3DNode.VIEW_MATRIX ) {\n\n\t\t\tuniformNode.value = object.modelViewMatrix;\n\n\t\t} else if ( scope === Object3DNode.NORMAL_MATRIX ) {\n\n\t\t\tuniformNode.value = object.normalMatrix;\n\n\t\t} else if ( scope === Object3DNode.WORLD_MATRIX ) {\n\n\t\t\tuniformNode.value = object.matrixWorld;\n\n\t\t} else if ( scope === Object3DNode.POSITION ) {\n\n\t\t\tuniformNode.value.setFromMatrixPosition( object.matrixWorld );\n\n\t\t} else if ( scope === Object3DNode.VIEW_POSITION ) {\n\n\t\t\tconst camera = frame.camera;\n\n\t\t\tuniformNode.value = uniformNode.value || new Vector3();\n\t\t\tuniformNode.value.setFromMatrixPosition( object.matrixWorld );\n\n\t\t\tuniformNode.value.applyMatrix4( camera.matrixWorldInverse );\n\n\t\t}\n\n\t}\n\n\tgenerate( builder ) {\n\n\t\tconst scope = this.scope;\n\n\t\tif ( scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX ) {\n\n\t\t\tthis._uniformNode.nodeType = 'mat4';\n\n\t\t} else if ( scope === Object3DNode.NORMAL_MATRIX ) {\n\n\t\t\tthis._uniformNode.nodeType = 'mat3';\n\n\t\t} else if ( scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION ) {\n\n\t\t\tthis._uniformNode.nodeType = 'vec3';\n\n\t\t}\n\n\t\treturn this._uniformNode.build( builder );\n\n\t}\n\n\tserialize( data ) {\n\n\t\tsuper.serialize( data );\n\n\t\tdata.scope = this.scope;\n\n\t}\n\n\tdeserialize( data ) {\n\n\t\tsuper.deserialize( data );\n\n\t\tthis.scope = data.scope;\n\n\t}\n\n}\n\nexport default Object3DNode;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}