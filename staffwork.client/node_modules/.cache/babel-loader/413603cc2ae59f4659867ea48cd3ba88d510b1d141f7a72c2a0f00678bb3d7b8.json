{"ast":null,"code":"import _slicedToArray from\"C:/Users/dro1l/source/repos/StaffWork/staffwork.client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Link}from\"react-router-dom\";import{CaretDown,CaretUp}from\"react-bootstrap-icons\";import{fetch_all_categories,fetch_all_wares}from\"../../redux/action_creators/ware_action_creator\";import{useAppDispatch,useAppSelector}from\"../../hooks/redux\";import CabinetWareItem from\"./CabinetWareItem\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CabinetWares=function CabinetWares(_ref){var allWares=_ref.allWares;var dispatch=useAppDispatch();var categories=useAppSelector(function(state){return state.wareReducer.allCategories.categories;});var _useState=useState({value:\"Name\",isReverse:false}),_useState2=_slicedToArray(_useState,2),sortField=_useState2[0],setSortField=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),categoryId=_useState4[0],setCategoryId=_useState4[1];var _useState5=useState(12),_useState6=_slicedToArray(_useState5,2),countOfRecords=_useState6[0],setCountOfRecords=_useState6[1];useEffect(function(){fetch_all();},[sortField,categoryId,countOfRecords]);useEffect(function(){dispatch(fetch_all_categories());},[]);var fetch_all=function fetch_all(){dispatch(fetch_all_wares({sortBy:{value:sortField.value,isReverse:sortField.isReverse},categoryId:categoryId===null?null:categoryId,countOfRecords:countOfRecords}));};var changeSortHandler=function changeSortHandler(field){if(field===\"PriceUp\")setSortField({value:\"Price\",isReverse:false});if(field===\"PriceDown\")setSortField({value:\"Price\",isReverse:true});};return/*#__PURE__*/_jsxs(\"div\",{className:\"w-75 mx-auto mt-3 mb-5\",children:[/*#__PURE__*/_jsx(\"p\",{className:'text-center',children:/*#__PURE__*/_jsx(Link,{to:\"/NewWare\",children:\"Add ware\"})}),/*#__PURE__*/_jsx(\"table\",{className:\"table table-borderless\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:'text-center row mt-3',children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Sort \",sortField.isReverse?/*#__PURE__*/_jsx(CaretDown,{}):/*#__PURE__*/_jsx(CaretUp,{})]}),/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(e){return changeSortHandler(e.currentTarget.value);},className:'form-select',children:[/*#__PURE__*/_jsx(\"option\",{value:\"PriceUp\",children:\"Cheaper\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PriceDown\",children:\"More expensive\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Category\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"select\",{onChange:function onChange(e){return setCategoryId(Number(e.currentTarget.value));},className:'form-select py-0',children:categories===null||categories===void 0?void 0:categories.map(function(item){return/*#__PURE__*/_jsx(\"option\",{value:item.id,children:item.name});})}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(e){setCategoryId(null);e.currentTarget.previousElementSibling.value=\"\";},className:\"input-group-text hover\",children:\"CLEAR\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"d-flex input-group-sm mt-3\",role:\"search\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control py-0\",type:\"search\",placeholder:\"Search by name\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){dispatch(fetch_all_wares({keyWords:e.currentTarget.previousElementSibling.value}));e.preventDefault();},className:\"btn btn-outline-success\",type:\"submit\",children:\"Search\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){fetch_all();e.preventDefault();e.currentTarget.previousElementSibling.previousElementSibling.value=\"\";},className:'btn btn-outline-primary',children:\"Reset\"})]})]})})}),allWares.map(function(item){return/*#__PURE__*/_jsx(CabinetWareItem,{item:item,fetchCallBack:function fetchCallBack(){fetch_all();}});})]})}),allWares.length>=countOfRecords?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return setCountOfRecords(countOfRecords+12);},className:'btn btn-outline-secondary position-absolute start-50 mb-5 py-1',children:\"More\"}):/*#__PURE__*/_jsx(_Fragment,{})]});};export default CabinetWares;","map":{"version":3,"names":["React","useEffect","useState","Link","CaretDown","CaretUp","fetch_all_categories","fetch_all_wares","useAppDispatch","useAppSelector","CabinetWareItem","CabinetWares","allWares","dispatch","categories","state","wareReducer","allCategories","value","isReverse","sortField","setSortField","categoryId","setCategoryId","countOfRecords","setCountOfRecords","fetch_all","sortBy","changeSortHandler","field","e","currentTarget","Number","map","item","id","name","previousElementSibling","keyWords","preventDefault","length"],"sources":["C:/Users/dro1l/source/repos/StaffWork/staffwork.client/src/pages/Account/CabinetWares.tsx"],"sourcesContent":["import React, {FC, useEffect, useState} from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport {CaretDown, CaretUp} from \"react-bootstrap-icons\";\r\nimport {delete_ware, fetch_all_categories, fetch_all_wares} from \"../../redux/action_creators/ware_action_creator\";\r\nimport {useAppDispatch, useAppSelector} from \"../../hooks/redux\";\r\nimport {IWare} from \"../../types/ware\";\r\nimport DeleteWareModel from \"./DeleteWareModel\";\r\nimport CabinetWareItem from \"./CabinetWareItem\";\r\n\r\ninterface ICabinetWares {\r\n    allWares: IWare[]\r\n}\r\n\r\nconst CabinetWares: FC<ICabinetWares> = ({allWares}) => {\r\n    const dispatch = useAppDispatch()\r\n    const categories = useAppSelector(state => state.wareReducer.allCategories.categories)\r\n    const [sortField, setSortField] = useState({value: \"Name\", isReverse: false})\r\n    const [categoryId, setCategoryId] = useState<number | null>(null)\r\n    const [countOfRecords, setCountOfRecords] = useState(12)\r\n    useEffect(() => {\r\n        fetch_all()\r\n    }, [sortField, categoryId, countOfRecords])\r\n    useEffect(() => {\r\n        dispatch(fetch_all_categories())\r\n    }, [])\r\n    const fetch_all = () => {\r\n        dispatch(fetch_all_wares({\r\n            sortBy: {value: sortField.value, isReverse: sortField.isReverse},\r\n            categoryId: categoryId === null ? null : categoryId,\r\n            countOfRecords: countOfRecords\r\n        }))\r\n    }\r\n    const changeSortHandler = (field: string) => {\r\n        if (field === \"PriceUp\")\r\n            setSortField({value: \"Price\", isReverse: false})\r\n\r\n        if (field === \"PriceDown\")\r\n            setSortField({value: \"Price\", isReverse: true})\r\n    }\r\n    return (\r\n        <div className={`w-75 mx-auto mt-3 mb-5`}>\r\n            <p className={'text-center'}><Link to={`/NewWare`}>Add ware</Link></p>\r\n            <table className=\"table table-borderless\">\r\n                <tbody>\r\n                <tr>\r\n                    <td>\r\n                        <div className={'text-center row mt-3'}>\r\n                            <div className=\"col\">\r\n                                <p>Sort {sortField.isReverse ? <CaretDown/> : <CaretUp/>}</p>\r\n                                <select onChange={e => changeSortHandler(e.currentTarget.value)}\r\n                                        className={'form-select'}>\r\n                                    <option value=\"PriceUp\">Cheaper</option>\r\n                                    <option value=\"PriceDown\">More expensive</option>\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"col\">\r\n                                <p>Category</p>\r\n                                <div className=\"input-group\">\r\n                                    <select onChange={(e) => setCategoryId(Number(e.currentTarget.value))} className={'form-select py-0'}>\r\n                                        {categories?.map(item => (\r\n                                            <option value={item.id}>{item.name}</option>\r\n                                        ))}\r\n                                    </select>\r\n                                    <span onClick={(e:any) => {setCategoryId(null);e.currentTarget.previousElementSibling.value = \"\"}} className=\"input-group-text hover\">CLEAR</span>\r\n                                </div>\r\n                            </div>\r\n                            <form className=\"d-flex input-group-sm mt-3\" role=\"search\">\r\n                                <input className=\"form-control py-0\" type=\"search\" placeholder=\"Search by name\"/>\r\n                                <button onClick={(e: any) => {\r\n                                    dispatch(fetch_all_wares({keyWords: e.currentTarget.previousElementSibling!.value}));\r\n                                    e.preventDefault()\r\n                                }} className=\"btn btn-outline-success\" type=\"submit\">Search\r\n                                </button>\r\n                                <button onClick={(e:any) => {fetch_all();e.preventDefault();e.currentTarget.previousElementSibling!.previousElementSibling!.value = \"\"}} className={'btn btn-outline-primary'}>Reset</button>\r\n                            </form>\r\n                        </div>\r\n\r\n                    </td>\r\n                </tr>\r\n                {allWares.map(item => (\r\n                    <CabinetWareItem item={item} fetchCallBack={() => {\r\n                        fetch_all()\r\n                    }}/>\r\n                ))}\r\n\r\n                </tbody>\r\n            </table>\r\n            {allWares.length >= countOfRecords ? <button onClick={e => setCountOfRecords(countOfRecords+12)} className={'btn btn-outline-secondary position-absolute start-50 mb-5 py-1'}>More</button> : <></>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CabinetWares;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}